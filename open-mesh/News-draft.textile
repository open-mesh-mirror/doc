h1. DRAFT: Batman-adv 2022.1 released

Apr 10th, 2022. Today the B.A.T.M.A.N. team publishes the April 2022 update to batman-adv! alfred got a new IPC message to request the current configuration of server instance. Also several code cleanups are included in this version.

As the kernel module always depends on the Linux kernel it is compiled against, it does not make sense to provide binaries on our website. As usual, you will find the signed tarballs in our download section:

https://downloads.open-mesh.org/batman/releases/batman-adv-2022.1/

h2. Thanks

Thanks to all people sending in patches:

* Christophe JAILLET <christophe.jaillet@wanadoo.fr>
* Eric Dumazet <edumazet@google.com>
* Marek Lindner <mareklindner@neomailbox.ch>
* Sebastian Andrzej Siewior <bigeasy@linutronix.de>
* Simon Wunderlich <sw@simonwunderlich.de>
* Sven Eckelmann <sven@narfation.org>

and to all those that supported us with good advice or rigorous testing:

* Leonardo MÃ¶rlein <freifunk@irrelefant.net>
* Sabrina Dubroca <sd@queasysnail.net>
* Roman Le bg <roman@romanlebg.fr>

h2. batman-adv

<pre>
$ git describe origin/master
v2022.0-10-gf07a0c37
$ range=v2022.0..v2022.0-10-gf07a0c37
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq

new kernel version
==================

      batman-adv: Remove redundant 'flush_workqueue()' calls
      batman-adv: make mc_forwarding atomic
      batman-adv: Use netif_rx().
      batman-adv: Migrate to linux/container_of.h
      batman-adv: compat: Add atomic mc_fowarding support for stable kernels

coding style cleanup/refactoring
================================


various
=======



bugfixes
========

      batman-adv: Request iflink once in batadv-on-batadv check
      batman-adv: Request iflink once in batadv_get_real_netdevice
      batman-adv: Don't expect inter-netns unique iflink indices
      batman-adv: Demote batadv-on-batadv skip error message
      batman-adv: Don't skb_split skbuffs with frag_list


2022.1 (2021-04-12)
===================

* support latest kernels (4.9 - 5.18)
* bugs squashed:

  - resolve "time-of-check-time-of-use" race condition when checking the
    the network namespace of a lower device
  - fix sanity check of network devices in different namespaces with
    colliding IDs
  - prevent transmission errors after splitting large GRO packets into
    smaller fragments
</pre>

h2. batctl

<pre>
$ git describe origin/master
v2022.0-4-g447ec66
$ range=v2022.0..v2022.0-3-gea5bdd8
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq




features
========



coding style cleanup/refactoring
================================




bugfixes
========

batctl: ping: Skip sleep after last packet


2022.1 (2021-04-12)
===================

* bugs squashed:

  - drop additional delay after the ping packet


</pre>

h2. alfred

<pre>
$ git describe origin/master
v2022.0-7-g6beca03
$ range=v2022.0..v2022.0-7-g6beca03
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq

Marek Lindner <mareklindner@neomailbox.ch> (1):
      alfred: introduce 'server status' IPC call

Simon Wunderlich <sw@simonwunderlich.de> (1):
      alfred: Start new development cycle

Sven Eckelmann <sven@narfation.org> (5):
      alfred: Ensure processed change_iface packet is 0-terminated
      alfred: Ensure evaluation order in FIXED_TLV_LEN
      alfred: Ensure printed interfaces in status are 0-terminated
      alfred: Check server_status type before parsing packet
      alfred: Ensure processed change_bat_iface packet is 0-terminated

2022.1 (2021-04-12)
===================

* coding style cleanups and refactoring
* introduce 'server status' IPC call
* bugs fixed:

  - prevent potential read outside of buffer when parsing
    alfred_change_interface_v0/alfred_change_bat_iface_v0 IPC message
</pre>


Happy routing,

The B.A.T.M.A.N. team