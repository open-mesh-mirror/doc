h1. DRAFT: Batman-adv 2019.3 released

Jul 30th, 2019. Today the B.A.T.M.A.N. team publishes the Jul 2019 update to batman-adv, batctl and alfred! The multicast optimization got support for group-aware optimizations for multicast addresses of scope greater than link-local. batctl was adjusted to handle such information and packets in various subcommands. Also support for hardif (aka. slave interface) specific settings was implemented. This required a change in how meshif and vlans are specified for subcommands. Instead of using "-m" for both meshif and vlans (and now hardifs), they were splitted into special subcommand prefixes:

* meshif <netdev>
* vlan <vdev>
* meshif <netdev> vid <vid>
* hardif <netdev>

To start a ping on bat2, following command should be used:

<pre>
$ batctl meshif bat2 ping 02:ba:de:af:fe:01
</pre>

As usual, this release also contains various bugfixes and code cleanups.

As the kernel module always depends on the Linux kernel it is compiled against, it does not make sense to provide binaries on our website. As usual, you will find the signed tarballs in our download section:

https://downloads.open-mesh.org/batman/releases/batman-adv-2019.3/

h2. Thanks

Thanks to all people sending in patches:

* David Miller <davem@davemloft.net>
* Greg Kroah-Hartman <gregkh@linuxfoundation.org>
* Linus LÃ¼ssing <linus.luessing@c0d3.blue>
* Simon Wunderlich <sw@simonwunderlich.de>
* Sven Eckelmann <sven@narfation.org>

and to all those that supported us with good advice or rigorous testing:

* Marek Lindner <mareklindner@neomailbox.ch>

h2. batman-adv

<pre>
$ git describe origin/master
v2019.2-16-g184f68cf
$ range=v2019.2..v2019.2-16-g184f68cf
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq



new kernel support
==================


coding style cleanup/refactoring
================================

      batman-adv: no need to check return value of debugfs_create functions
      batman-adv: Fix includes for *_MAX constants
      batman-adv: Add missing include for atomic functions
      batman-adv: Use includes instead of fwdecls

multicast
=========

      batman-adv: mcast: shorten multicast tt/tvlv worker spinlock section
      batman-adv: mcast: collect softif listeners from IP lists instead
      batman-adv: mcast: avoid redundant multicast TT entries with bridges
      batman-adv: mcast: detect, distribute and maintain multicast router presence
      batman-adv: mcast: apply optimizations for routable packets, too
      batman-adv: Fix deletion of RTR(4|6) mcast list entries

bugfixes
========

      batman-adv: Fix netlink dumping of all mcast_flags buckets
      batman-adv: Fix duplicated OGMs on NETDEV_UP




2019.3 (2019-07-30)
===================

* support latest kernels (3.16 - 5.3)
* coding style cleanups and refactoring
* add routable multicast optimizations
* bugs squashed:

  - fix duplicated OGMs on NETDEV_UP
  - fix dumping of multicast flags

</pre>

h2. batctl

<pre>
$ git describe origin/master
v2019.2-15-gf5b4e96
$ range=v2019.2..v2019.2-16-g1d7dba8
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq



tcpump
======

      batctl: tcpdump: Add support for MCAST TVLV
      batctl: tcpdump: Add support for unicast fragmentation
      batctl: tcpdump: Add support for coded packets


      batctl: Prefer netlink hardif status retrieval over sysfs
      batctl: tcpdump: Add support for MCASTv2 RTR(4|6) flags
      batctl: mcast_flags: Add support for MCASTv2 RTR(4|6) flags

new command structure
=====================

      batctl: Make vlan setting explicit
      batctl: Integrate hardif setting framework
      batctl: Add elp_interval setting command
      batctl: Add throughput_override setting command
      batctl: Replace '-m meshif' option with selector prefix
      batctl: Allow to omit explicit prefix name

2019.3 (2019-07-30)
===================

* add tcpdump support for MCAST TVLV, unicast fragments and coded packets
* implement support for multicast RTR flags
* avoid some kernel deprecation warning by using more generic netlink over
  sysfs
* use type specific prefixes to select mesh interface or vlan instead of '-m'
* add support for hardif specific settings

</pre>

h2. alfred

<pre>
$ git describe origin/master
v2019.2-3-g0fc6e66
$ range=v2019.2..v2019.2-3-g0fc6e66
$ git shortlog --email --no-merges "${range}"
$ git log --no-merges "${range}"|grep -e '\(Reported\|Tested\|Acked\|Reviewed-by\|Co-authored-by\)-by'|sed 's/.*:/*/'|sort|uniq

      alfred: vis: Use rtnl to query list of hardifs of meshif
      alfred: vis: Retrieve hardif status via generic netlink


2019.3 (2019-07-30)
===================

* avoid some kernel deprecation warning by using more generic netlink over
  sysfs
</pre>


Happy routing,

The B.A.T.M.A.N. team